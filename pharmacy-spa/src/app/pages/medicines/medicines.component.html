<section class="toolbar">
    <input [(ngModel)]="search" (ngModelChange)="onSearchChange()" type="search" placeholder="Search by medicine nameâ€¦">
    <button (click)="load()">Refresh</button>
  </section>
  
  <section class="grid">
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Expiry</th>
          <th>Qty</th>
          <th>Price</th>
          <th>Brand</th>
          <th>Sell</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let m of items"
            [class.low-expiry]="daysUntil(m.expiryDate) < 30"
            [class.low-qty]="daysUntil(m.expiryDate) >= 30 && m.quantity < 10">
          <td>{{ m.fullName }}</td>
          <td>{{ m.expiryDate | date:'mediumDate' }}</td>
          <td>{{ m.quantity }}</td>
          <td>{{ m.price | number:'1.2-2' }}</td>
          <td>{{ m.brand }}</td>
          <td>
            <input #qty type="number" min="1" [max]="m.quantity" value="1" style="width:64px">&nbsp;
            <button (click)="sell(m, qty.value)" [disabled]="salesBusy">Sell</button>
          </td>
        </tr>
      </tbody>
    </table>
  </section>
  
  <section class="form">
    <h2>Add Medicine</h2>
  
    <div class="row">
      <label>Name
        <input [(ngModel)]="form.fullName" name="fullName" required>
      </label>
  
      <label>Brand
        <input [(ngModel)]="form.brand" name="brand">
      </label>
    </div>
  
    <div class="row">
      <label>Expiry
        <input [(ngModel)]="form.expiryDate" type="date" name="expiryDate" required>
      </label>
  
      <label>Quantity
        <input [(ngModel)]="form.quantity" type="number" name="quantity" min="0" required>
      </label>
  
      <label>Price
        <input [(ngModel)]="form.price" type="number" name="price" min="0" step="0.01" required>
      </label>
    </div>
  
    <label>Notes
      <textarea [(ngModel)]="form.notes" rows="2" placeholder="Optional notes (not shown in grid)"></textarea>
    </label>
  
    <button (click)="add()">Add</button>
  </section>
  